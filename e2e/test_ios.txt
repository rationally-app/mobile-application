*** Settings ***
Library		 Process
Library 	 CustomAppiumLibrary.py

*** Variables ***
${REMOTE_URL}				  http://127.0.0.1:4723/wd/hub	 # URL to appium server
${ANDROID_AUTOMATION_NAME}    XCUITest
${ANDROID_PLATFORM_NAME}      iOS
${PLATFORM_VERSION}    13.6
${DEVICE_NAME}    

${BUNDLE_ID}			host.exp.exponent
${IP}					127.0.0.1

${TOKEN}				
${ENDPOINT_URL}			


*** Keywords *** 

Start Appium
    Start Process    appium --relaxed-security    shell=True    stdout=${CURDIR}/appium_kill_stdout.txt    stderr=${CURDIR}/appium_kill_stderr.txt
    Sleep   30s

Setup
    Open Application  ${REMOTE_URL}   automationName=${ANDROID_AUTOMATION_NAME}
    ...  platformName=${ANDROID_PLATFORM_NAME}  platformVersion=${PLATFORM_VERSION}
    ...  deviceName=${DEVICE_NAME}  newCommandTimeout=600  appWaitForLaunch=false
	Sleep   30s
	${deeplink}=	Set Variable	exp://exp.host/@supplyallytest/rationally/--/login?release-channel=e2e&key=${TOKEN}&endpoint=${ENDPOINT_URL}
	Run Process    xcrun simctl openurl booted ${deeplink}    shell=True    stdout=${CURDIR}/appium_ios_stdout.txt 
	Sleep   180s
	Capture Page Screenshot    screen.png

Close All Apps
	Close All Applications


*** Test Cases ***
Start Appium
    Start Appium

Install App
    Setup

Teardown
	Close All Apps